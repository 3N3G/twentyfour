def op(a, b, operator):
    if operator == "*":
        return a*b
    elif operator == "/":
        if b == 0:
            return "divisionbyzero"
        else:
            return a/b
    elif operator == "-":
        return a-b
    elif operator == "+":
        return a+b

nums = []
howmanynums = int(input("How many numbers do you want? (Standard is 4) "))
for i in range(howmanynums):
    nums.append(int(input("Input a number: ")))
howManySols = input("Do you want all the solutions? (Y/N) ")
operators = ["*", "/", "-", "+"]

def solveTF(num, sol):
    if len(num) == 1:
        if abs(num[0]-24) < 0.01:
            return sol
    else:
        for i, num1 in enumerate(num):
            for j, num2 in enumerate(num):
                if i != j:
                    for oper in operators:
                        new_num = []
                        for k, n in enumerate(num):
                            if k != i and k != j:
                                new_num.append(n)
                        if op(num1, num2, oper) != "divisionbyzero":
                            new_num.append(op(num1,num2,oper))
                            new_sol = []
                            for k, h in enumerate(sol):
                                if k != i and k != j:
                                    new_sol.append(h)
                            new_sol.append((sol[i], oper, sol[j]))
                            solution = solveTF(new_num, new_sol)
                            if solution != "No solution":
                                if howManySols == "Y":
                                    print(solution)
                                    pass
                                else: 
                                    return solution
    return "No solution"
if howManySols == "N":
    print(solveTF(nums, nums))
else:
    solveTF(nums, nums)
